//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Admin.h"
#include "eMenuPCH1.h"
#include "DataModule.h"
#include "MainForm.h"
#include "DataModuleMainForm.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TFAdmin *FAdmin;
//---------------------------------------------------------------------------
__fastcall TFAdmin::TFAdmin(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------






void __fastcall TFAdmin::FormAfterMonitorDpiChanged(TObject *Sender, int OldDPI, int NewDPI)

{
    ShowMessage("");
}
//---------------------------------------------------------------------------









void __fastcall TFAdmin::Button1Click(TObject *Sender)
{
   Randomize();
   TMemoryStream *str = new TMemoryStream;
   Image1->Picture->SaveToStream(str);
   DM->TSQL->SQL->Clear();
   DM->TSQL->SQL->Add("INSERT INTO eMenu.dbo.Food(name_food,picture,kod_category)");
   DM->TSQL->SQL->Add("VALUES(\'??\',:P1,"+IntToStr(random(7))+")");
   DM->TSQL->Parameters->ParamByName("P1")->DataType = ftBlob;
   DM->TSQL->Parameters->ParamByName("P1")->LoadFromStream(str,ftBlob);
   DM->TSQL->ExecSQL();
}
//---------------------------------------------------------------------------

void __fastcall TFAdmin::Button2Click(TObject *Sender)
{
	ShowMessage(IntToStr(random(7)));
}
//---------------------------------------------------------------------------


void __fastcall TFAdmin::Button3Click(TObject *Sender)
{
   TMemoryStream *str = new TMemoryStream;
   Image1->Picture->SaveToStream(str);
   DM->TSQL->SQL->Clear();
   DM->TSQL->SQL->Add("UPDATE eMenu.dbo.Food Set picture = :P1");
   DM->TSQL->Parameters->ParamByName("P1")->DataType = ftBlob;
   DM->TSQL->Parameters->ParamByName("P1")->LoadFromStream(str,ftBlob);
   DM->TSQL->ExecSQL();
}
//---------------------------------------------------------------------------




